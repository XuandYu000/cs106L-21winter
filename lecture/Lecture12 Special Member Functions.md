## Lecture12 Special Member Functions

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%227%22%2C%22position%22%3A%7B%22pageIndex%22%3A6%2C%22rects%22%3A%5B%5B44.498%2C79.607%2C405.672%2C96.197%5D%2C%5B44.498%2C54.407%2C150.926%2C70.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%227%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=7">“These are six special member functions – every class has them by default!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%227%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 7</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2210%22%2C%22position%22%3A%7B%22pageIndex%22%3A9%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C436.154%2C242.197%5D%2C%5B44.498%2C200.407%2C301.076%2C216.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2210%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=10">“These functions are generated only when they're called (and before any are explicitly defined by you)”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2210%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 10</a></span>)</span>

1.  Default constructor
2.  Destructor
3.  Copy constructor
4.  Copy assignment operator
5.  Move constructor
6.  Move assignment operator

### Copy and copy assignment

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2225%22%2C%22position%22%3A%7B%22pageIndex%22%3A24%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C459.922%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2225%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=25">“Why override special member functions?”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2225%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 25</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2225%22%2C%22position%22%3A%7B%22pageIndex%22%3A24%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C409.072%2C242.197%5D%2C%5B44.498%2C200.407%2C108.31%2C216.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2225%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=25">“Sometimes, the default special member functions aren’t sufficient!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2225%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 25</a></span>)</span>

*   默认情况下，copy构造会复制每个成员变量`_newVar = var;`

在你的copy对象为指针的情况下这种copy会指向同一块内存里的数据，而不是新的copy对象

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2238%22%2C%22position%22%3A%7B%22rects%22%3A%5B%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2238%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=NaN">“Copying isn’t always simple!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2238%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 38</a></span>)</span> 复制并不总是那么简单！

Deep copy: an object that is a complete, independent copy of the original

### Default and delete

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2241%22%2C%22position%22%3A%7B%22pageIndex%22%3A40%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C430.501%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2241%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=41">“What would you do to prevent copies?”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2241%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 41</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2242%22%2C%22position%22%3A%7B%22pageIndex%22%3A41%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C462.484%2C295.146%5D%2C%5B44.498%2C225.607%2C500.821%2C242.197%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2242%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=42">“We can delete special member functions! Setting a special member function to delete removes its functionality!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2242%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 42</a></span>)</span>

    class PasswordManager {
    	public:
    		PasswordManager();
    		PasswordManager(const PasswordManager& pm);
    		~PasswordManager();

    		PasswordManager(const PasswordManager& rhs) = delete;
    		PasswordManager& operator = (const PasswordManager& rhs) = delete;
    }

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2243%22%2C%22position%22%3A%7B%22pageIndex%22%3A42%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C462.484%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2243%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=43">“We can delete special member functions!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2243%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 43</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2246%22%2C%22position%22%3A%7B%22pageIndex%22%3A45%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C94.627%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=46">“Uses”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 46</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2246%22%2C%22position%22%3A%7B%22pageIndex%22%3A45%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C408.792%2C242.197%5D%2C%5B44.498%2C200.407%2C110.48%2C216.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=46">“We can selectively allow functionality of special member functions!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 46</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2246%22%2C%22position%22%3A%7B%22pageIndex%22%3A45%2C%22rects%22%3A%5B%5B80.498%2C165.207%2C422.7%2C181.797%5D%2C%5B80.498%2C140.007%2C269.596%2C156.597%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=46">“This has lots of uses – what if we only want one copy of an instance to be allowed?”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 46</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2246%22%2C%22position%22%3A%7B%22pageIndex%22%3A45%2C%22rects%22%3A%5B%5B80.498%2C114.705%2C385.424%2C131.397%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=46">“This is how classes like <code>std::unique_ptr </code>work!”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2246%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 46</a></span>)</span>

\= default

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2247%22%2C%22position%22%3A%7B%22pageIndex%22%3A46%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C559.32%2C242.197%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2247%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=47">“We can also keep the default copy constructor if we declare other constructors!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2247%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 47</a></span>)</span>

    class PasswordManager {
    	public:
    		PasswordManager();
    		PasswordManager(const PasswordManager& pm) = default;
    		~PasswordManager();

    		PasswordManager(const PasswordManager& rhs) = delete;
    		PasswordManager& operator = (const PasswordManager& rhs) = delete;
    }

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2248%22%2C%22position%22%3A%7B%22pageIndex%22%3A47%2C%22rects%22%3A%5B%5B464.596%2C187.383%2C649.844%2C203.973%5D%2C%5B443.426%2C170.883%2C670.996%2C187.473%5D%2C%5B478.126%2C154.383%2C636.256%2C170.973%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2248%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=48">“Declaring any user-defined constructor will make the default disappear without this!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2248%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 48</a></span>)</span>

#### <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2249%22%2C%22position%22%3A%7B%22pageIndex%22%3A48%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C177.535%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2249%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=49">“The Rule of 0”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2249%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 49</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2250%22%2C%22position%22%3A%7B%22pageIndex%22%3A49%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C361.058%2C242.197%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2250%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=50">“If the default SMFs work, don’t define your own!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2250%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 50</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2250%22%2C%22position%22%3A%7B%22pageIndex%22%3A49%2C%22rects%22%3A%5B%5B44.498%2C190.407%2C399.174%2C206.997%5D%2C%5B44.498%2C165.207%2C292.004%2C181.797%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2250%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=50">“We should only define new ones when the default ones generated by the compiler won't work.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2250%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 50</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2251%22%2C%22position%22%3A%7B%22pageIndex%22%3A50%2C%22rects%22%3A%5B%5B80.498%2C130.007%2C425.542%2C146.597%5D%2C%5B80.498%2C104.807%2C427.768%2C121.397%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2251%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=51">“This usually happens when we work with dynamically allocated memory, like pointers to things on the heap!”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2251%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 51</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2251%22%2C%22position%22%3A%7B%22rects%22%3A%5B%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2251%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=NaN">“If you have to define a destructor, copy constructor, or copy assignment operator, you should define all three!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2251%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 51</a></span>)</span> 如果必须定义析构函数、复制构造函数或复制赋值运算符，则应该定义所有三个！

### Move and move asignment

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2269%22%2C%22position%22%3A%7B%22pageIndex%22%3A68%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C243.391%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2269%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=69">“Is copying enough?”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2269%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 69</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2269%22%2C%22position%22%3A%7B%22pageIndex%22%3A68%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C436.291%2C242.197%5D%2C%5B44.498%2C200.407%2C351.196%2C216.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2269%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=69">“We’ve learned about the default constructor, destructor, and the copy constructor and assignment operator.”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2269%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 69</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2272%22%2C%22position%22%3A%7B%22pageIndex%22%3A71%2C%22rects%22%3A%5B%5B44.5%2C270.261%2C260.275%2C295.146%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2272%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=72">“This can be wasteful!”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2272%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 72</a></span>)</span>

Move operations

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2284%22%2C%22position%22%3A%7B%22pageIndex%22%3A83%2C%22rects%22%3A%5B%5B80.498%2C231.607%2C440.326%2C248.197%5D%2C%5B80.498%2C206.407%2C278.976%2C222.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2284%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=84">“Move constructors and move assignment operators will perform "memberwise moves."”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2284%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 84</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2284%22%2C%22position%22%3A%7B%22pageIndex%22%3A83%2C%22rects%22%3A%5B%5B80.498%2C181.207%2C486.054%2C197.797%5D%2C%5B80.498%2C156.007%2C345.084%2C172.597%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2284%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=84">“Defining a move assignment operator prevents generation of a move copy constructor, and vice versa.”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2284%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 84</a></span>)</span>

#### 警告

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2288%22%2C%22position%22%3A%7B%22pageIndex%22%3A87%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C402.128%2C242.197%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=88">“Move constructors and operators are only generated if:”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 88</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2288%22%2C%22position%22%3A%7B%22pageIndex%22%3A87%2C%22rects%22%3A%5B%5B80.498%2C190.407%2C289.938%2C206.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=88">“No copy operations are declared”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 88</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2288%22%2C%22position%22%3A%7B%22pageIndex%22%3A87%2C%22rects%22%3A%5B%5B80.498%2C165.207%2C294.32%2C181.797%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=88">“No move operations are declared”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 88</a></span>)</span>

*   <span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2288%22%2C%22position%22%3A%7B%22pageIndex%22%3A87%2C%22rects%22%3A%5B%5B80.498%2C140.007%2C244.242%2C156.597%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=88">“No destructor is declared”</a></span>

    <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2288%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 88</a></span>)</span>

“Declaring any of these will get rid of the default C++ generated operations.” <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2289%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 89</a></span>)</span>

<span class="highlight" data-annotation="%7B%22attachmentURI%22%3A%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2F4F8CZNJ7%22%2C%22pageLabel%22%3A%2290%22%2C%22position%22%3A%7B%22pageIndex%22%3A89%2C%22rects%22%3A%5B%5B44.498%2C225.607%2C432.228%2C242.197%5D%2C%5B44.498%2C200.407%2C202.936%2C216.997%5D%5D%7D%2C%22citationItem%22%3A%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2290%22%7D%7D" ztype="zhighlight"><a href="zotero://open-pdf/library/items/4F8CZNJ7?page=90">“If we want to explicitly support move operations, we can set the operators to default:”</a></span> <span class="citation" data-citation="%7B%22citationItems%22%3A%5B%7B%22uris%22%3A%5B%22http%3A%2F%2Fzotero.org%2Fusers%2F14003431%2Fitems%2FUCMQUSR5%22%5D%2C%22locator%22%3A%2290%22%7D%5D%2C%22properties%22%3A%7B%7D%7D" ztype="zcitation">(<span class="citation-item"><a href="zotero://select/library/items/UCMQUSR5">“12: Special Member Functions”, p. 90</a></span>)</span>

    Widget(Widget&& ) = default;
    Widget& operator = (Widget&& ) = default; // This support move

    Widget(const Widget&) = default;
    Widget& operator=(const Widget&) = default;// This support copy
